# æ¨¡å— 05ï¼šæ•°æ®åˆ†ç¦»

[â† è¿”å›ä¸»æ–‡æ¡£](../AI_AGENT_è§†è§‰è¿˜åŸ_SOP_3.1_ä¸»æ–‡æ¡£.md)

---

## ğŸ¯ ç›®æ ‡

ä»é˜¶æ®µ4æå–çš„å†…å®¹ä¸­åˆ†ç¦»å‡ºç»“æ„åŒ–æ•°æ®ï¼Œç”ŸæˆTypeScriptæ•°æ®æ–‡ä»¶ã€‚

---

## âš ï¸ å…³é”®è¦æ±‚

- âœ… **æ£€æµ‹æ‰€æœ‰é‡å¤æ¨¡å¼**ï¼ˆä¸åªæ˜¯3+ä¸ªï¼Œ1-2ä¸ªä¹Ÿè¦è®°å½•ï¼‰
- âœ… æå–**æ‰€æœ‰å®ä¾‹**çš„å®Œæ•´æ•°æ®ï¼ˆä¸æ˜¯æ ·ä¾‹ï¼‰
- âœ… ç”ŸæˆTypeScriptæ¥å£
- âœ… æ•°æ®é‡å¿…é¡»ä¸åŸç½‘ç«™ä¸€è‡´

---

## ğŸ“‹ æ•°æ®æå–æ¸…å•

### å¿…é¡»æå–çš„æ•°æ®ç±»å‹

```
â–¡ å¯¼èˆªé“¾æ¥ï¼ˆå…¨éƒ¨ï¼ŒåŒ…æ‹¬ä¸»å¯¼èˆªå’Œå­å¯¼èˆªï¼‰
â–¡ å¡ç‰‡åˆ—è¡¨ï¼ˆè§„åˆ™å¡ç‰‡ã€æœåŠ¡å¡ç‰‡ã€æ¡ˆä¾‹å¡ç‰‡ç­‰ï¼‰
â–¡ è¯„ä»·/æ¨èï¼ˆå¦‚æœæœ‰ï¼‰
â–¡ å›¢é˜Ÿæˆå‘˜ï¼ˆå¦‚æœæœ‰ï¼‰
â–¡ åšå®¢æ–‡ç« åˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰
â–¡ FAQåˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰
â–¡ è¡¨å•å­—æ®µé…ç½®ï¼ˆå¦‚æœæœ‰ï¼‰
â–¡ å›¾ç‰‡ç”»å»Šï¼ˆå¦‚æœæœ‰ï¼‰
â–¡ Footeré“¾æ¥ç»„ï¼ˆå¦‚æœæœ‰ï¼‰
â–¡ ä»»ä½•å‡ºç°2æ¬¡ä»¥ä¸Šçš„å†…å®¹å—
```

---

## ğŸ“‹ æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤1ï¼šè¯†åˆ«é‡å¤æ¨¡å¼

**ç›®æ ‡**ï¼šæ‰¾å‡ºæ‰€æœ‰é‡å¤å‡ºç°çš„å…ƒç´ 

```python
import json
from collections import defaultdict

def detect_repeated_patterns(sections_content):
    """æ£€æµ‹é‡å¤æ¨¡å¼"""
    patterns = defaultdict(list)
    
    for section in sections_content:
        section_idx = section['section_index']
        structure = section['structure']
        
        # æ£€æµ‹é‡å¤çš„åˆ—è¡¨é¡¹
        for lst in structure.get('lists', []):
            if len(lst['items']) >= 2:  # 2ä¸ªæˆ–ä»¥ä¸Šå°±è®°å½•
                pattern_key = f"list_{'-'.join(lst.get('class', ['default']))}"
                patterns[pattern_key].extend([
                    {'text': item, 'section': section_idx}
                    for item in lst['items']
                ])
        
        # æ£€æµ‹å¡ç‰‡æ¨¡å¼ï¼ˆé€šè¿‡classè¯†åˆ«ï¼‰
        # å‡è®¾å¡ç‰‡é€šå¸¸åœ¨æŸä¸ªå®¹å™¨divä¸‹
        cards = detect_card_pattern(section['html_raw'])
        if cards:
            patterns['cards'].extend(cards)
        
        # æ£€æµ‹å…¶ä»–é‡å¤å…ƒç´ ...
    
    # è¿‡æ»¤ï¼šåªä¿ç•™çœŸæ­£é‡å¤çš„ï¼ˆå‡ºç°2æ¬¡ä»¥ä¸Šï¼‰
    repeated = {k: v for k, v in patterns.items() if len(v) >= 2}
    
    return repeated

def detect_card_pattern(html):
    """æ£€æµ‹å¡ç‰‡æ¨¡å¼"""
    from bs4 import BeautifulSoup
    soup = BeautifulSoup(html, 'html.parser')
    
    cards = []
    
    # å¸¸è§å¡ç‰‡classæ¨¡å¼
    card_patterns = [
        'card', 'item', 'box', 'block', 
        'service', 'feature', 'product',
        'w-dyn-item'  # WebflowåŠ¨æ€é¡¹
    ]
    
    for pattern in card_patterns:
        elements = soup.find_all(class_=lambda x: x and pattern in ' '.join(x).lower())
        
        for elem in elements:
            card_data = extract_card_data(elem)
            if card_data:
                cards.append(card_data)
    
    return cards

def extract_card_data(elem):
    """ä»å¡ç‰‡å…ƒç´ æå–æ•°æ®"""
    card = {}
    
    # æå–æ ‡é¢˜
    heading = elem.find(['h3', 'h4', 'h5'])
    if heading:
        card['title'] = heading.get_text(strip=True)
    
    # æå–æè¿°
    para = elem.find('p')
    if para:
        card['description'] = para.get_text(strip=True)
    
    # æå–å›¾ç‰‡
    img = elem.find('img')
    if img:
        card['image'] = {
            'src': img.get('src', ''),
            'alt': img.get('alt', '')
        }
    
    # æå–é“¾æ¥
    link = elem.find('a')
    if link:
        card['link'] = {
            'href': link.get('href', ''),
            'text': link.get_text(strip=True)
        }
    
    return card if card else None
```

---

### æ­¥éª¤2ï¼šæå–å¯¼èˆªæ•°æ®

**ç›®æ ‡**ï¼šæå–å®Œæ•´çš„å¯¼èˆªç»“æ„

```python
def extract_navigation_data(sections_content):
    """æå–å¯¼èˆªæ•°æ®"""
    # é€šå¸¸å¯¼èˆªåœ¨ç¬¬ä¸€ä¸ªsectionæˆ–å•ç‹¬çš„<nav>æ ‡ç­¾
    nav_data = {
        'logo': {},
        'main_menu': [],
        'cta_button': {}
    }
    
    # æŸ¥æ‰¾åŒ…å«å¯¼èˆªçš„section
    for section in sections_content:
        if section['section_type'] == 'navigation':
            html = section['html_raw']
            soup = BeautifulSoup(html, 'html.parser')
            
            # æå–logo
            logo = soup.find(class_=lambda x: x and 'logo' in ' '.join(x).lower())
            if logo:
                logo_img = logo.find('img')
                if logo_img:
                    nav_data['logo'] = {
                        'src': logo_img.get('src', ''),
                        'alt': logo_img.get('alt', ''),
                        'href': logo.get('href', '/') if logo.name == 'a' else '/'
                    }
            
            # æå–ä¸»èœå•
            menu = soup.find(['nav', 'ul'], class_=lambda x: x and any(kw in ' '.join(x).lower() for kw in ['nav', 'menu']))
            if menu:
                links = menu.find_all('a', recursive=True)
                for link in links:
                    # è·³è¿‡æŒ‰é’®ç±»é“¾æ¥
                    if 'btn' not in ' '.join(link.get('class', [])).lower():
                        nav_data['main_menu'].append({
                            'text': link.get_text(strip=True),
                            'href': link.get('href', ''),
                            'active': 'active' in link.get('class', [])
                        })
            
            # æå–CTAæŒ‰é’®
            cta = soup.find(class_=lambda x: x and 'btn' in ' '.join(x).lower())
            if cta:
                nav_data['cta_button'] = {
                    'text': cta.get_text(strip=True),
                    'href': cta.get('href', ''),
                    'class': ' '.join(cta.get('class', []))
                }
            
            break
    
    return nav_data
```

---

### æ­¥éª¤3ï¼šæå–å¡ç‰‡æ•°æ®

**ç›®æ ‡**ï¼šæå–**æ‰€æœ‰**å¡ç‰‡çš„å®Œæ•´æ•°æ®

```python
def extract_all_cards_data(sections_content):
    """æå–æ‰€æœ‰å¡ç‰‡æ•°æ®"""
    all_cards = []
    
    for section in sections_content:
        html = section['html_raw']
        soup = BeautifulSoup(html, 'html.parser')
        
        # å¤šç§å¡ç‰‡æ£€æµ‹ç­–ç•¥
        cards = (
            find_cards_by_class(soup) +
            find_cards_by_structure(soup) +
            find_webflow_dynamic_items(soup)
        )
        
        for card in cards:
            all_cards.append({
                'id': len(all_cards) + 1,
                'section': section['section_index'],
                **card
            })
    
    return all_cards

def find_cards_by_class(soup):
    """é€šè¿‡classè¯†åˆ«å¡ç‰‡"""
    cards = []
    card_keywords = ['card', 'item', 'service', 'feature', 'testimonial', 'product']
    
    for keyword in card_keywords:
        elements = soup.find_all(class_=lambda x: x and keyword in ' '.join(x).lower())
        
        for elem in elements:
            card = extract_card_data(elem)
            if card:
                cards.append(card)
    
    return cards

def find_cards_by_structure(soup):
    """é€šè¿‡ç»“æ„æ¨¡å¼è¯†åˆ«å¡ç‰‡"""
    cards = []
    
    # æ¨¡å¼ï¼šåŒ…å«å›¾ç‰‡+æ ‡é¢˜+æè¿°çš„div
    containers = soup.find_all(['div', 'article'])
    
    for container in containers:
        has_img = container.find('img') is not None
        has_heading = container.find(['h3', 'h4', 'h5']) is not None
        has_para = container.find('p') is not None
        
        if has_img and has_heading:  # è‡³å°‘æœ‰å›¾ç‰‡å’Œæ ‡é¢˜
            card = extract_card_data(container)
            if card:
                cards.append(card)
    
    return cards

def find_webflow_dynamic_items(soup):
    """è¯†åˆ«WebflowåŠ¨æ€é¡¹"""
    cards = []
    
    items = soup.find_all(class_='w-dyn-item')
    for item in items:
        card = extract_card_data(item)
        if card:
            cards.append(card)
    
    return cards
```

---

### æ­¥éª¤4ï¼šæå–å…¶ä»–æ•°æ®ç±»å‹

**FAQæ•°æ®**

```python
def extract_faq_data(sections_content):
    """æå–FAQæ•°æ®"""
    faqs = []
    
    for section in sections_content:
        if 'faq' in section['section_type'].lower():
            html = section['html_raw']
            soup = BeautifulSoup(html, 'html.parser')
            
            # æŸ¥æ‰¾FAQé¡¹ï¼ˆé€šå¸¸æ˜¯accordionæˆ–ç±»ä¼¼ç»“æ„ï¼‰
            faq_items = soup.find_all(class_=lambda x: x and any(kw in ' '.join(x).lower() for kw in ['faq', 'accordion', 'question']))
            
            for item in faq_items:
                question = item.find(class_=lambda x: x and 'question' in ' '.join(x).lower())
                answer = item.find(class_=lambda x: x and 'answer' in ' '.join(x).lower())
                
                if question and answer:
                    faqs.append({
                        'id': len(faqs) + 1,
                        'question': question.get_text(strip=True),
                        'answer': answer.get_text(strip=True)
                    })
    
    return faqs
```

**Teamæ•°æ®**

```python
def extract_team_data(sections_content):
    """æå–å›¢é˜Ÿæˆå‘˜æ•°æ®"""
    team = []
    
    for section in sections_content:
        if 'team' in section['section_type'].lower():
            html = section['html_raw']
            soup = BeautifulSoup(html, 'html.parser')
            
            members = soup.find_all(class_=lambda x: x and 'member' in ' '.join(x).lower())
            
            for member in members:
                team.append({
                    'id': len(team) + 1,
                    'name': member.find(['h3', 'h4']).get_text(strip=True) if member.find(['h3', 'h4']) else '',
                    'role': member.find(class_=lambda x: x and 'role' in ' '.join(x).lower()).get_text(strip=True) if member.find(class_=lambda x: x and 'role' in ' '.join(x).lower()) else '',
                    'photo': member.find('img').get('src', '') if member.find('img') else '',
                    'bio': member.find('p').get_text(strip=True) if member.find('p') else ''
                })
    
    return team
```

---

### æ­¥éª¤5ï¼šç”ŸæˆTypeScriptæ¥å£

**è‡ªåŠ¨ç”Ÿæˆç±»å‹å®šä¹‰**

```python
def generate_typescript_interfaces(data_structure):
    """ç”ŸæˆTypeScriptæ¥å£"""
    interfaces = []
    
    for data_name, data_list in data_structure.items():
        if not data_list:
            continue
        
        # ä»ç¬¬ä¸€ä¸ªæ•°æ®é¡¹æ¨æ–­ç±»å‹
        sample = data_list[0]
        interface_name = to_pascal_case(data_name)
        
        interface = f"export interface {interface_name} {{\n"
        
        for key, value in sample.items():
            ts_type = infer_typescript_type(value)
            interface += f"  {key}: {ts_type};\n"
        
        interface += "}\n"
        interfaces.append(interface)
    
    return '\n'.join(interfaces)

def infer_typescript_type(value):
    """æ¨æ–­TypeScriptç±»å‹"""
    if isinstance(value, str):
        return 'string'
    elif isinstance(value, int):
        return 'number'
    elif isinstance(value, bool):
        return 'boolean'
    elif isinstance(value, dict):
        # é€’å½’ç”Ÿæˆå¯¹è±¡ç±»å‹
        obj_type = "{\n"
        for k, v in value.items():
            obj_type += f"    {k}: {infer_typescript_type(v)};\n"
        obj_type += "  }"
        return obj_type
    elif isinstance(value, list):
        if value:
            return f"{infer_typescript_type(value[0])}[]"
        else:
            return "any[]"
    else:
        return 'any'

def to_pascal_case(snake_str):
    """è½¬æ¢ä¸ºPascalCase"""
    return ''.join(word.capitalize() for word in snake_str.split('_'))
```

---

## ğŸ“¤ è¾“å‡ºæ–‡ä»¶

### 1. types.ts

```typescript
// types.ts
export interface NavigationItem {
  text: string;
  href: string;
  active: boolean;
}

export interface Logo {
  src: string;
  alt: string;
  href: string;
}

export interface Card {
  id: number;
  section: number;
  title: string;
  description: string;
  image: {
    src: string;
    alt: string;
  };
  link: {
    href: string;
    text: string;
  };
}

export interface FAQ {
  id: number;
  question: string;
  answer: string;
}

export interface TeamMember {
  id: number;
  name: string;
  role: string;
  photo: string;
  bio: string;
}
```

---

### 2. navigationData.ts

```typescript
// navigationData.ts
import { NavigationItem, Logo } from './types';

export const logo: Logo = {
  src: 'https://cdn.example.com/logo.png',
  alt: 'Company Logo',
  href: '/'
};

export const mainMenu: NavigationItem[] = [
  { text: 'é¦–é¡µ', href: '/', active: true },
  { text: 'æœåŠ¡', href: '/services', active: false },
  { text: 'æ¡ˆä¾‹', href: '/portfolio', active: false },
  { text: 'å…³äº', href: '/about', active: false },
  { text: 'è”ç³»', href: '/contact', active: false }
];

export const ctaButton = {
  text: 'å…è´¹å’¨è¯¢',
  href: '/contact',
  class: 'btn btn-primary'
};
```

---

### 3. cardsData.ts

```typescript
// cardsData.ts
import { Card } from './types';

export const cards: Card[] = [
  {
    id: 1,
    section: 2,
    title: 'ç½‘ç«™è®¾è®¡',
    description: 'ä¸“ä¸šçš„UI/UXè®¾è®¡ï¼Œæ‰“é€ ç‹¬ç‰¹çš„å“ç‰Œå½¢è±¡',
    image: {
      src: 'https://cdn.example.com/service1.jpg',
      alt: 'ç½‘ç«™è®¾è®¡'
    },
    link: {
      href: '/services/design',
      text: 'äº†è§£æ›´å¤š'
    }
  },
  // âš ï¸ å¿…é¡»åŒ…å«æ‰€æœ‰12ä¸ªå¡ç‰‡ï¼Œä¸èƒ½åªæœ‰1-2ä¸ªæ ·ä¾‹
  {
    id: 2,
    section: 2,
    title: 'å‰ç«¯å¼€å‘',
    description: 'ä½¿ç”¨æœ€æ–°æŠ€æœ¯æ ˆï¼Œæ„å»ºå¿«é€Ÿå“åº”çš„ç½‘ç«™',
    image: {
      src: 'https://cdn.example.com/service2.jpg',
      alt: 'å‰ç«¯å¼€å‘'
    },
    link: {
      href: '/services/frontend',
      text: 'äº†è§£æ›´å¤š'
    }
  }
  // ... å‰©ä½™10ä¸ªå¡ç‰‡
];
```

---

## âœ… æ£€æŸ¥ç‚¹

å®Œæˆæœ¬é˜¶æ®µåï¼Œå¿…é¡»ç¡®è®¤ï¼š

- [ ] **æ‰€æœ‰é‡å¤æ¨¡å¼å·²è¯†åˆ«**
  - [ ] å¯¼èˆªæ•°æ® âœ“
  - [ ] å¡ç‰‡æ•°æ® âœ“
  - [ ] FAQæ•°æ®ï¼ˆå¦‚æœ‰ï¼‰âœ“
  - [ ] å…¶ä»–é‡å¤å…ƒç´  âœ“

- [ ] **æ•°æ®å®Œæ•´æ€§**
  - [ ] å¯¼èˆªé¡¹æ•°é‡ = åŸç½‘ç«™
  - [ ] å¡ç‰‡æ•°é‡ = åŸç½‘ç«™
  - [ ] ä¸èƒ½åªæœ‰1-2ä¸ªæ ·ä¾‹

- [ ] **TypeScriptæ–‡ä»¶å·²ç”Ÿæˆ**
  - [ ] types.ts âœ“
  - [ ] navigationData.ts âœ“
  - [ ] cardsData.ts âœ“
  - [ ] å…¶ä»–æ•°æ®æ–‡ä»¶ âœ“

- [ ] **ç±»å‹å®šä¹‰æ­£ç¡®**
  - [ ] æ‰€æœ‰å¿…éœ€å­—æ®µéƒ½æœ‰
  - [ ] ç±»å‹åŒ¹é…å®é™…æ•°æ®

---

## ğŸš¨ å¸¸è§é”™è¯¯

### âŒ é”™è¯¯1ï¼šæ•°æ®ä¸å®Œæ•´

**è¡¨ç°**ï¼š
```typescript
export const cards: Card[] = [
  { id: 1, title: "Card 1", ... }  // åªæœ‰1ä¸ª
];
// ä½†åŸç½‘ç«™æœ‰12ä¸ªå¡ç‰‡ï¼
```

**è§£å†³**ï¼šæ£€æŸ¥åŸHTMLï¼Œç¡®ä¿æå–äº†**æ‰€æœ‰**å®ä¾‹

---

### âŒ é”™è¯¯2ï¼šé—æ¼æ•°æ®ç±»å‹

**è¡¨ç°**ï¼šåªæå–äº†å¡ç‰‡ï¼Œé—æ¼äº†å¯¼èˆªã€FAQç­‰

**è§£å†³**ï¼šæŒ‰ç…§æ•°æ®æå–æ¸…å•é€é¡¹æ£€æŸ¥

---

[â† ä¸Šä¸€æ­¥ï¼šæ¨¡å—04 - åˆ†æ®µå†…å®¹æå–](./04_åˆ†æ®µå†…å®¹æå–.md) | [â†’ ä¸‹ä¸€æ­¥ï¼šæ¨¡å—06 - ç»„ä»¶è§„åˆ’](./06_ç»„ä»¶è§„åˆ’.md)
