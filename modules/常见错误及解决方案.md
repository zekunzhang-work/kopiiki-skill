# å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

[â† è¿”å›ä¸»æ–‡æ¡£](../AI_AGENT_è§†è§‰è¿˜åŸ_SOP_3.1_ä¸»æ–‡æ¡£.md)

---

æœ¬æ–‡æ¡£æ±‡æ€»äº†SOPæ‰§è¡Œè¿‡ç¨‹ä¸­æœ€å¸¸è§çš„4å¤§é”™è¯¯åŠå…¶è§£å†³æ–¹æ¡ˆã€‚

---

## âŒ é”™è¯¯1ï¼šç”¨å ä½ç¬¦ä»£æ›¿å†…å®¹

### è¡¨ç°

```tsx
// âŒ é”™è¯¯ç¤ºä¾‹
<section className="py-100">
  <div>Content sections would go here</div>
</section>

<section className="services">
  {/* TODO: Add service cards */}
</section>

<section className="py-100">
  <p>Section content will be implemented</p>
</section>
```

### åŸå› åˆ†æ

1. **HTMLæ–‡ä»¶å¤ªå¤§**ï¼Œä¸€æ¬¡æ€§è¯»å–å¯¼è‡´åªè·å–äº†éƒ¨åˆ†å†…å®¹
2. **Tokené™åˆ¶**ï¼Œå¤„ç†åˆ°ä¸€åŠå°±åœæ­¢äº†
3. **æ²¡æœ‰ä½¿ç”¨åˆ†æ®µå¤„ç†ç­–ç•¥**
4. **è¯¯ä»¥ä¸ºåªè¦æœ‰sectionæ ‡ç­¾å°±è¡Œ**

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆAï¼šåˆ†æ®µå¤„ç†ï¼ˆæ¨èï¼‰

```python
# 1. å…ˆå®šä½æ‰€æœ‰sectionçš„è¡Œå·
with open('sections_structure.json', 'r') as f:
    sections = json.load(f)['sections_map']

# 2. é€ä¸ªsectionè¯»å–å’Œå¤„ç†
for section_info in sections:
    # åªè¯»å–è¿™ä¸ªsectionçš„å†…å®¹
    section_html = read_lines(
        'index.html',
        section_info['start'],
        section_info['end']
    )
    
    # æå–å†…å®¹
    content = extract_section_content(section_html)
    
    # ä¿å­˜
    save_json(f"section_{section_info['index']}_content.json", content)
```

#### æ–¹æ¡ˆBï¼šä½¿ç”¨section_content.json

```tsx
// âœ… æ­£ç¡®åšæ³•
import { section2Data } from '../data/section2Data';

<section className="py-100">
  <div className="container">
    <h2>{section2Data.title}</h2>
    <p>{section2Data.description}</p>
    {section2Data.cards.map(card => (
      <Card key={card.id} {...card} />
    ))}
  </div>
</section>
```

### é¢„é˜²æªæ–½

1. **é˜¶æ®µ0**ï¼šè¯„ä¼°æ–‡ä»¶å¤§å°ï¼Œåˆ¶å®šåˆ†æ®µç­–ç•¥
2. **é˜¶æ®µ4**ï¼šé€ä¸ªsectionæå–å†…å®¹ï¼Œä¿å­˜ä¸ºJSON
3. **é˜¶æ®µ7**ï¼šåŸºäºJSONç”Ÿæˆç»„ä»¶ï¼Œç¦æ­¢å ä½ç¬¦
4. **é˜¶æ®µ8**ï¼šæµè§ˆå™¨æ£€æŸ¥ï¼Œå‘ç°å ä½ç¬¦ç«‹å³ä¿®å¤

---

## âŒ é”™è¯¯2ï¼šæ•°æ®ä¸å®Œæ•´

### è¡¨ç°

```typescript
// âŒ é”™è¯¯ï¼šåªæœ‰1-2ä¸ªæ ·ä¾‹æ•°æ®
export const cards = [
  {
    id: 1,
    title: "å¡ç‰‡1",
    description: "æè¿°..."
  },
  {
    id: 2,
    title: "å¡ç‰‡2",
    description: "æè¿°..."
  }
];

// ä½†åŸç½‘ç«™æœ‰12ä¸ªå¡ç‰‡ï¼
```

### åŸå› åˆ†æ

1. **åªæå–äº†æ ·ä¾‹**ï¼Œæ²¡æœ‰æå–å…¨éƒ¨æ•°æ®
2. **è¯¯ä»¥ä¸ºé‡å¤å…ƒç´ åªéœ€è¦1ä¸ª**
3. **æ£€æµ‹é‡å¤æ¨¡å¼æ—¶é—æ¼äº†éƒ¨åˆ†**
4. **æ²¡æœ‰å¯¹æ¯”åŸç½‘ç«™æ•°é‡**

### è§£å†³æ–¹æ¡ˆ

#### æ­¥éª¤1ï¼šç»Ÿè®¡åŸç½‘ç«™æ•°é‡

```python
from bs4 import BeautifulSoup

def count_cards_in_original(html_file):
    """ç»Ÿè®¡åŸç½‘ç«™çš„å¡ç‰‡æ•°é‡"""
    with open(html_file, 'r', encoding='utf-8') as f:
        soup = BeautifulSoup(f, 'html.parser')
    
    # å¤šç§æ£€æµ‹æ–¹å¼
    cards = []
    
    # æ–¹å¼1ï¼šé€šè¿‡class
    cards += soup.find_all(class_=lambda x: x and 'card' in ' '.join(x).lower())
    
    # æ–¹å¼2ï¼šé€šè¿‡ç»“æ„ï¼ˆimg + h3 + pï¼‰
    containers = soup.find_all(['div', 'article'])
    for c in containers:
        if c.find('img') and c.find(['h3', 'h4']) and c.find('p'):
            cards.append(c)
    
    # å»é‡
    cards = list(set(cards))
    
    print(f"æ‰¾åˆ° {len(cards)} ä¸ªå¡ç‰‡")
    return cards

# æ‰§è¡Œ
original_cards = count_cards_in_original('index.html')
```

#### æ­¥éª¤2ï¼šæå–æ‰€æœ‰æ•°æ®

```python
def extract_all_cards_data(cards):
    """æå–æ‰€æœ‰å¡ç‰‡çš„å®Œæ•´æ•°æ®"""
    cards_data = []
    
    for i, card in enumerate(cards, 1):
        card_data = {
            'id': i,
            'title': card.find(['h3', 'h4']).get_text(strip=True),
            'description': card.find('p').get_text(strip=True),
            'image': {
                'src': card.find('img').get('src', ''),
                'alt': card.find('img').get('alt', '')
            },
            'link': {
                'href': card.find('a').get('href', ''),
                'text': card.find('a').get_text(strip=True)
            } if card.find('a') else None
        }
        
        cards_data.append(card_data)
    
    return cards_data

# æå–å®Œæ•´æ•°æ®
all_cards_data = extract_all_cards_data(original_cards)
print(f"æå–äº† {len(all_cards_data)} ä¸ªå¡ç‰‡çš„æ•°æ®")

# ä¿å­˜
with open('cardsData.ts', 'w', encoding='utf-8') as f:
    f.write("export const cards = ")
    f.write(json.dumps(all_cards_data, indent=2, ensure_ascii=False))
    f.write(";")
```

#### æ­¥éª¤3ï¼šéªŒè¯æ•°é‡

```python
# éªŒè¯
assert len(all_cards_data) == len(original_cards), "æ•°æ®æ•°é‡ä¸åŒ¹é…ï¼"
print("âœ“ æ•°æ®å®Œæ•´æ€§éªŒè¯é€šè¿‡")
```

### é¢„é˜²æªæ–½

1. **é˜¶æ®µ5å¼€å§‹å‰**ï¼šç»Ÿè®¡åŸç½‘ç«™å„ç±»å…ƒç´ æ•°é‡
2. **æå–æ—¶**ï¼šä½¿ç”¨å¾ªç¯æå–æ‰€æœ‰å®ä¾‹ï¼Œä¸æ˜¯æ‰‹åŠ¨å¤åˆ¶
3. **æå–å**ï¼šå¯¹æ¯”æ•°é‡ï¼Œç¡®ä¿ä¸€è‡´
4. **é˜¶æ®µ8**ï¼šåœ¨æµè§ˆå™¨ä¸­éªŒè¯æ•°é‡

---

## âŒ é”™è¯¯3ï¼šè·³è¿‡section

### è¡¨ç°

```tsx
// âŒ é”™è¯¯ï¼šApp.tsxç¼ºå¤±å¤šä¸ªsection
const App = () => {
  return (
    <>
      <Navigation />
      <HeroSection />
      {/* Section 2-14 missing! */}
      <Footer />
    </>
  );
};
```

### åŸå› åˆ†æ

1. **è¯¯ä»¥ä¸ºåªè¦æœ‰Heroå’ŒFooterå°±å¤Ÿäº†**
2. **æ²¡æœ‰ä¸ºæ¯ä¸ªsectionç”Ÿæˆç»„ä»¶**
3. **å¿˜è®°åœ¨App.tsxä¸­å¯¼å…¥å’Œä½¿ç”¨**
4. **ä»¥ä¸ºä¸­é—´çš„sectionä¸é‡è¦**

### è§£å†³æ–¹æ¡ˆ

#### æ­¥éª¤1ï¼šæ£€æŸ¥sectionæ•°é‡

```python
# æ£€æŸ¥å·²ç”Ÿæˆçš„sectionç»„ä»¶
import os

section_files = [f for f in os.listdir('src/components/sections/') if f.endswith('.tsx')]
print(f"å·²ç”Ÿæˆçš„sectionç»„ä»¶: {len(section_files)}")

# å¯¹æ¯”åº”è¯¥æœ‰çš„æ•°é‡
with open('sections_structure.json', 'r') as f:
    expected_count = len(json.load(f)['sections_map'])

print(f"åº”è¯¥æœ‰çš„sectionæ•°: {expected_count}")

if len(section_files) < expected_count:
    print(f"âŒ ç¼ºå¤± {expected_count - len(section_files)} ä¸ªsectionç»„ä»¶")
else:
    print("âœ“ sectionç»„ä»¶æ•°é‡æ­£ç¡®")
```

#### æ­¥éª¤2ï¼šç”Ÿæˆç¼ºå¤±çš„section

```python
def generate_missing_sections(structure_file, sections_dir):
    """ç”Ÿæˆç¼ºå¤±çš„sectionç»„ä»¶"""
    with open(structure_file, 'r') as f:
        sections = json.load(f)['sections_map']
    
    existing_files = set(os.listdir(sections_dir))
    
    for section in sections:
        component_name = generate_section_component_name(section)
        filename = f"{component_name}.tsx"
        
        if filename not in existing_files:
            print(f"ç”Ÿæˆç¼ºå¤±çš„: {filename}")
            
            # è¯»å–sectionå†…å®¹
            content_file = f"section_{section['index']}_content.json"
            with open(content_file, 'r') as f:
                content = json.load(f)
            
            # ç”Ÿæˆç»„ä»¶
            component_code = generate_section_component(content, component_name)
            
            # ä¿å­˜
            with open(f"{sections_dir}/{filename}", 'w', encoding='utf-8') as f:
                f.write(component_code)

# æ‰§è¡Œ
generate_missing_sections('sections_structure.json', 'src/components/sections')
```

#### æ­¥éª¤3ï¼šæ›´æ–°App.tsx

```python
def generate_app_tsx(sections):
    """ç”Ÿæˆå®Œæ•´çš„App.tsx"""
    
    # ç”Ÿæˆå¯¼å…¥è¯­å¥
    imports = ["import React from 'react';"]
    imports.append("import Navigation from './components/layout/Navigation';")
    imports.append("import Footer from './components/layout/Footer';")
    imports.append("")
    
    for section in sections:
        component_name = generate_section_component_name(section)
        imports.append(f"import {component_name} from './components/sections/{component_name}';")
    
    imports.append("")
    imports.append("import './styles/webflow.css';")
    imports.append("import './styles/main.css';")
    
    # ç”Ÿæˆç»„ä»¶ä½¿ç”¨
    body = []
    body.append("const App: React.FC = () => {")
    body.append("  return (")
    body.append("    <>")
    body.append("      <Navigation />")
    body.append("      <main>")
    
    for section in sections:
        component_name = generate_section_component_name(section)
        body.append(f"        <{component_name} />")
    
    body.append("      </main>")
    body.append("      <Footer />")
    body.append("    </>")
    body.append("  );")
    body.append("};")
    body.append("")
    body.append("export default App;")
    
    # ç»„åˆ
    code = '\n'.join(imports) + '\n\n' + '\n'.join(body)
    
    # ä¿å­˜
    with open('src/App.tsx', 'w', encoding='utf-8') as f:
        f.write(code)
    
    print("âœ“ App.tsxå·²æ›´æ–°ï¼ŒåŒ…å«æ‰€æœ‰section")

# æ‰§è¡Œ
with open('sections_structure.json', 'r') as f:
    sections = json.load(f)['sections_map']

generate_app_tsx(sections)
```

### é¢„é˜²æªæ–½

1. **é˜¶æ®µ6**ï¼šç”Ÿæˆç»„ä»¶æ¸…å•ï¼Œæ˜ç¡®éœ€è¦å¤šå°‘ä¸ªsectionç»„ä»¶
2. **é˜¶æ®µ7**ï¼šä½¿ç”¨è„šæœ¬ç”Ÿæˆæ‰€æœ‰sectionï¼Œä¸è¦æ‰‹åŠ¨
3. **ç”ŸæˆApp.tsxå‰**ï¼šæ£€æŸ¥sectionç»„ä»¶æ•°é‡
4. **é˜¶æ®µ8**ï¼šæ‰“å¼€æµè§ˆå™¨ï¼Œæ»šåŠ¨åˆ°åº•éƒ¨ï¼Œç¡®è®¤æ‰€æœ‰sectionéƒ½å­˜åœ¨

---

## âŒ é”™è¯¯4ï¼šTokené™åˆ¶å¯¼è‡´å†…å®¹æˆªæ–­

### è¡¨ç°

- åªå¤„ç†äº†å‰é¢å‡ ä¸ªsection
- å¤„ç†åˆ°ä¸€åŠåœæ­¢
- åé¢çš„sectionæ²¡æœ‰å†…å®¹

### åŸå› åˆ†æ

1. **HTMLæ–‡ä»¶å¤ªå¤§**ï¼ˆ>100KBï¼‰
2. **ä¸€æ¬¡æ€§è¯»å–å…¨éƒ¨å†…å®¹**
3. **è¶…è¿‡tokené™åˆ¶**
4. **æ²¡æœ‰é‡‡ç”¨åˆ†æ®µç­–ç•¥**

### è§£å†³æ–¹æ¡ˆ

#### ç­–ç•¥1ï¼šåˆ†æ®µè¯»å–ï¼ˆæœ€æœ‰æ•ˆï¼‰

å‚è€ƒ [æ¨¡å—00ï¼šæ–‡ä»¶æ‰«æä¸åˆ†å—ç­–ç•¥](./00_æ–‡ä»¶æ‰«æä¸åˆ†å—ç­–ç•¥.md)

```python
# 1. è¯„ä¼°æ–‡ä»¶å¤§å°
file_size = os.path.getsize('index.html') / 1024  # KB
print(f"HTMLæ–‡ä»¶å¤§å°: {file_size:.1f}KB")

# 2. åˆ¶å®šç­–ç•¥
if file_size > 300:
    strategy = "å¢é‡ç”Ÿæˆï¼ˆ4-5è½®ï¼‰"
elif file_size > 100:
    strategy = "åˆ†æ®µå¤„ç†ï¼ˆ2-3è½®ï¼‰"
else:
    strategy = "ä¸€æ¬¡æ€§å¤„ç†"

print(f"å¤„ç†ç­–ç•¥: {strategy}")

# 3. æ‰§è¡Œåˆ†æ®µå¤„ç†
# ï¼ˆå‚è€ƒæ¨¡å—00çš„è¯¦ç»†ä»£ç ï¼‰
```

#### ç­–ç•¥2ï¼šå¢é‡ç”Ÿæˆ

```
Round 1: æ¡†æ¶ + Hero + Navigation + Footer
Round 2: Section 2-5
Round 3: Section 6-10
Round 4: Section 11-15
Round 5: å®Œå–„å’ŒéªŒè¯
```

æ¯ä¸€è½®éƒ½ä¿å­˜è¿›åº¦ï¼Œé¿å…é‡å¤å·¥ä½œã€‚

#### ç­–ç•¥3ï¼šä¼˜å…ˆçº§å¤„ç†

```
ä¼˜å…ˆçº§1ï¼ˆå¿…é¡»ï¼‰ï¼š
  - Navigation
  - Hero
  - Footer

ä¼˜å…ˆçº§2ï¼ˆé‡è¦ï¼‰ï¼š
  - å‰3ä¸ªä¸»è¦section

ä¼˜å…ˆçº§3ï¼ˆè¡¥å……ï¼‰ï¼š
  - å…¶ä½™section

å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ï¼Œç¡®ä¿æ ¸å¿ƒåŠŸèƒ½å®Œæ•´
```

### é¢„é˜²æªæ–½

1. **é˜¶æ®µ0å¿…é¡»æ‰§è¡Œ**ï¼šè¯„ä¼°æ–‡ä»¶å¤§å°
2. **æ–‡ä»¶>100KB**ï¼šå¿…é¡»é‡‡ç”¨åˆ†æ®µç­–ç•¥
3. **å®šæœŸä¿å­˜**ï¼šæ¯å¤„ç†å‡ ä¸ªsectionå°±ä¿å­˜è¿›åº¦
4. **ä½¿ç”¨section_map.json**ï¼šç²¾ç¡®å®šä½ï¼Œé¿å…é‡å¤è¯»å–

---

## ğŸ“Š é”™è¯¯é¢‘ç‡ç»Ÿè®¡

åŸºäºå®é™…æ‰§è¡Œç»éªŒï¼š

| é”™è¯¯ç±»å‹ | å‘ç”Ÿé¢‘ç‡ | ä¸¥é‡ç¨‹åº¦ | ä¿®å¤éš¾åº¦ |
|---------|---------|---------|---------|
| é”™è¯¯1ï¼šå ä½ç¬¦ | â­â­â­â­â­ | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ |
| é”™è¯¯2ï¼šæ•°æ®ä¸å®Œæ•´ | â­â­â­â­ | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ |
| é”™è¯¯3ï¼šè·³è¿‡section | â­â­â­ | ğŸ”´ é«˜ | ğŸŸ¢ ä½ |
| é”™è¯¯4ï¼šå†…å®¹æˆªæ–­ | â­â­â­â­ | ğŸ”´ é«˜ | ğŸŸ  é«˜ |

**ç»“è®º**ï¼šè¿™4ä¸ªé”™è¯¯å æ‰€æœ‰é—®é¢˜çš„80%ä»¥ä¸Šï¼Œå¿…é¡»é‡ç‚¹é¢„é˜²ã€‚

---

## ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

### 1. é¢„é˜²æ°¸è¿œå¥½äºä¿®å¤

```
âœ“ é˜¶æ®µ0è¯„ä¼°æ–‡ä»¶å¤§å°
âœ“ åˆ¶å®šåˆé€‚çš„å¤„ç†ç­–ç•¥
âœ“ ä½¿ç”¨section_map.jsonå¯¼èˆª
âœ“ é€ä¸ªsectionæå–å’ŒéªŒè¯
```

### 2. åˆ†æ®µå¤„ç†æ˜¯å…³é”®

```
âœ“ HTML > 100KBå¿…é¡»åˆ†æ®µ
âœ“ æ¯æ®µ < 20KB
âœ“ ä¿å­˜ä¸­é—´ç»“æœ
âœ“ å®šæœŸéªŒè¯
```

### 3. æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

```
âœ“ æå–å‰ç»Ÿè®¡åŸç½‘ç«™æ•°é‡
âœ“ æå–åå¯¹æ¯”æ•°é‡
âœ“ ä½¿ç”¨å¾ªç¯æå–æ‰€æœ‰å®ä¾‹
âœ“ æµè§ˆå™¨éªŒè¯
```

### 4. ç»„ä»¶æ¶æ„è§„åˆ’

```
âœ“ é€šç”¨ç»„ä»¶ + Sectionç»„ä»¶åˆ†å¼€
âœ“ ä¸ºæ¯ä¸ªsectionåˆ›å»ºç»„ä»¶
âœ“ App.tsxå¿…é¡»å¯¼å…¥æ‰€æœ‰section
âœ“ ä½¿ç”¨ç»„ä»¶æ¸…å•æ£€æŸ¥
```

---

## ğŸ”§ è°ƒè¯•å·¥å…·

### å¿«é€Ÿè¯Šæ–­è„šæœ¬

```python
def diagnose_project():
    """è¯Šæ–­é¡¹ç›®å¸¸è§é—®é¢˜"""
    
    issues = []
    
    # 1. æ£€æŸ¥sectionç»„ä»¶æ•°é‡
    section_files = len([f for f in os.listdir('src/components/sections/') if f.endswith('.tsx')])
    expected = len(json.load(open('sections_structure.json'))['sections_map'])
    
    if section_files < expected:
        issues.append(f"âŒ ç¼ºå¤± {expected - section_files} ä¸ªsectionç»„ä»¶")
    
    # 2. æ£€æŸ¥æ•°æ®æ–‡ä»¶
    data_files = os.listdir('src/data/')
    if 'cardsData.ts' not in data_files:
        issues.append("âŒ ç¼ºå¤± cardsData.ts")
    
    # 3. æ£€æŸ¥App.tsx
    with open('src/App.tsx', 'r') as f:
        app_content = f.read()
        
        if 'Content goes here' in app_content:
            issues.append("âŒ App.tsxåŒ…å«å ä½ç¬¦")
        
        if 'TODO' in app_content:
            issues.append("âŒ App.tsxåŒ…å«TODOæ³¨é‡Š")
    
    # 4. æ£€æŸ¥æ„å»º
    result = os.system('npm run build 2>&1 | grep -i error')
    if result != 0:
        issues.append("âŒ æ„å»ºå¤±è´¥")
    
    # è¾“å‡ºç»“æœ
    if issues:
        print("å‘ç°ä»¥ä¸‹é—®é¢˜ï¼š")
        for issue in issues:
            print(f"  {issue}")
    else:
        print("âœ“ æœªå‘ç°å¸¸è§é—®é¢˜")
    
    return issues

# è¿è¡Œè¯Šæ–­
diagnose_project()
```

---

[â† è¿”å›ä¸»æ–‡æ¡£](../AI_AGENT_è§†è§‰è¿˜åŸ_SOP_3.1_ä¸»æ–‡æ¡£.md)
